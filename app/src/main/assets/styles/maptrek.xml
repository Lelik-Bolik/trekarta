<?xml version="1.0" encoding="UTF-8"?>
<rendertheme xmlns:xi="http://www.w3.org/2001/XInclude" map-background="#fffcfa" version="1"
    xmlns="http://opensciencemap.org/rendertheme">

    <!--
    TODO:
    https://wiki.openstreetmap.org/wiki/Key:natural - many features missing
    https://wiki.openstreetmap.org/wiki/Tag:waterway%3Dweir
    https://wiki.openstreetmap.org/wiki/Key:lock
    https://wiki.openstreetmap.org/wiki/Key:lock
    https://wiki.openstreetmap.org/wiki/Tag:craft=winery
    https://wiki.openstreetmap.org/wiki/Tag:tower:type%3Dcommunication
    https://wiki.openstreetmap.org/wiki/Key:intermittent - draw with condensed stipple
    https://wiki.openstreetmap.org/wiki/Tag:amenity=boat rental
    railway:subway
    https://wiki.openstreetmap.org/wiki/Tag:aerialway=goods
    https://wiki.openstreetmap.org/wiki/Tag:public_transport%3Dstation
    https://wiki.openstreetmap.org/wiki/Tag:highway%3Dbus_guideway
    https://wiki.openstreetmap.org/wiki/Tag:highway%3Draceway
    https://wiki.openstreetmap.org/wiki/Tag:highway%3Dmini_roundabout
    https://wiki.openstreetmap.org/wiki/Tag:highway%3Dservices
    https://wiki.openstreetmap.org/wiki/Tag:highway%3Drest_area
    https://wiki.openstreetmap.org/wiki/Key:smoothness - use instead of tracktype
    https://wiki.openstreetmap.org/wiki/Tag:natural%3Dscrub - add symbols
    protect_class:1
    https://wiki.openstreetmap.org/wiki/Key:depth - for fords and waterways
    -->

    <!--
    ==== LAYERS ====
    -->

    <stylemenu defaultlang="en" defaultvalue="topo" id="menu">
        <layer enabled="true" id="base">
            <cat id="land" />
            <cat id="water" />
            <cat id="administrative" />
            <cat id="places" />
        </layer>

        <layer enabled="true" id="nature">
            <cat id="forest" />
            <cat id="mountains" />
            <cat id="nature" />
            <cat id="insignificant-water" />
            <cat id="underground-water" />
        </layer>

        <layer enabled="true" id="roads" parent="base">
            <cat id="landclasses" />
            <cat id="roads" />
            <cat id="roads-surface" />
            <cat id="roads-shield" />
            <cat id="ferries" />
            <cat id="underground-railways" />
            <cat id="railways" />
            <cat id="trams" />
            <cat id="buildings" />
        </layer>

        <layer enabled="true" id="urban" parent="roads">
            <cat id="urban" />
            <cat id="aeroways" />
            <cat id="aerialways" />
            <cat id="pedestrian" />
            <cat id="cycling" />
            <cat id="forest" />
            <cat id="grass" />
            <cat id="insignificant-water" />
        </layer>

        <layer enabled="true" id="topo" parent="urban">
            <cat id="agriculture" />
            <cat id="tracks" />
            <cat id="track-names" />
            <cat id="fords" />
            <cat id="topo" />
            <cat id="contours" />
            <overlay id="nature" />
        </layer>
    </stylemenu>

    <!--
    ==== STYLES ====
    -->

    <!-- Color adjustment tool: http://scg.ar-ch.org/ -->
    <style-color id="transparent" color="#00ffffff" />
    <style-color id="text-outline" color="#ffffff" />
    <style-color id="text" color="#000000" />

    <style-color id="motorway-overview" color="#deb683" />
    <style-color id="trunk-overview" color="#c6c5a2" />
    <style-color id="primary-overview" color="#c6c5a2" />

    <style-color id="service-road-outline" color="#aa807040" />
    <style-color id="road-outline" color="#807040" />
    <style-color id="primary-road-outline" color="#7f7700" />
    <style-color id="motorway-road-outline" color="#805f2e" />

    <style-color id="trunk" color="#fedb52" />
    <style-color id="trunk_link" color="#fee16e" />
    <style-color id="highway" color="#fcba5a" />
    <style-color id="primary" color="#f4d26e" />
    <style-color id="secondary" color="#f4f3ae" />
    <style-color id="unclassified" color="#ffffff" />
    <style-color id="road-construction" color="#f0f0f0" />
    <style-color id="road-construction-stipple" color="#e0e0e0" />
    <style-color id="residential" color="#ffffff" />
    <style-color id="pedestrian" color="#e0e0e0" />
    <style-color id="highway-service" color="#f5f5f5" />

    <style-color id="tunnel" color="#ffffff" />
    <style-color id="highway-tunnel" color="#fdcf8c" />
    <style-color id="trunk-tunnel" color="#fee685" />
    <style-color id="primary-tunnel" color="#f8e19d" />
    <style-color id="service-tunnel" color="#e5e5e5" />
    <style-color id="pedestrian-tunnel" color="#e0e0e0" />

    <style-color id="access-no" color="#ffdddd" />
    <style-color id="access-private" color="#eeeeee" />
    <style-color id="service-access-private" color="#e0e0e0" />
    <style-color id="road-ice" color="#bcdada" />
    <style-color id="road-winter" color="#deebeb" />
    <style-color id="surface-dirt" color="#b28f67" />
    <style-color id="surface-unpaved" color="#d4c1aa" />

    <style-color id="road-text" color="#101010" />
    <style-color id="road-text-outline" color="#eeeeee" />

    <style-color id="nature-reserve-text" color="#0a5c0a" />
    <style-color id="nature-reserve-text-outline" color="#d1fad1" />
    <style-color id="military-text" color="#990000" />
    <style-color id="military-text-outline" color="#ffcccc" />

    <style-color id="railway-stroke" color="#777777" />
    <style-color id="railway-stipple" color="#ffffff" />
    <style-color id="railway-subway" color="#888888" />
    <style-color id="railway-funicular" color="#663322" />
    <style-color id="railway-tram" color="#aa9988" />
    <style-color id="railway-narrow" color="#999999" />
    <style-color id="railway-abandoned" color="#cccccc" />
    <style-color id="railway-bridge" color="#ffffff" />
    <style-color id="railway-bridge-outline" color="#aa202020" />

    <style-color id="dam-stroke" color="#333333" />
    <style-color id="dam-fill" color="#999999" />

    <style-color id="cliff" color="#888888" />
    <style-color id="natural-text" color="#2d2d2d" />

    <style-color id="pier-stroke" color="#d0d0d0" />
    <style-color id="pier-fill" color="#e4e4e4" />

    <style-line cap="butt" fix="true" id="fix" width="1.0" />
    <style-text caption="true" dy="20" fill="#555522" id="poi" k="name" size="16" stroke="#aaffffff"
        stroke-width="2.5" />

    <style-area fade="-1" fill="#faf7f1" id="land" mesh="true" />

    <!-- Water -->
    <style-text style="italic" fill="#486780" id="water" k="name" size="16" stroke="#cae1ff"
        stroke-width="2.0" />
    <style-line id="oneway-water" src="assets:symbols/oneway_river.svg" />
    <style-line id="water" stroke="#a4bbcc" use="fix" />
    <style-line fix="false" id="river" stroke="#a4bbcc" use="water" />
    <style-line cap="butt" fix="true" id="ferry" stipple="20" stipple-stroke="#587f9d"
        stroke="#00ffffff" width="2.0" />
    <style-line id="ferry-overview" stipple="10" stipple-width="0.5" use="ferry" width="0.5" />
    <style-area fade="-1" fill="#a4bbcc" id="water" mesh="true" />

    <!-- Natural -->
    <style-line id="cliff" src="assets:symbols/natural/cliff.svg" />
    <style-area blend="11" blend-fill="#90b36c" fade="8" fill="#b3d095" id="wood" />
    <style-area fade="12" fill="#c9dc91" id="greens" /> <!-- meadow|garden -->
    <style-area fade="12" fill="#d3dcb9" id="grass" />
    <style-area fade="10" fill="#c2cba5" id="scrub" />
    <style-area fade="10" fill="#d6d99f" id="heath" />
    <style-area fade="12" fill="#eee5dc" id="scree" />
    <style-area fade="12" fill="#e4dab5" id="farmyard" />
    <style-area fade="12" fill="#e6ddd0" id="farmland" />

    <!-- Landuse -->
    <style-line cap="butt" fix="true" id="park" stroke="#9ac56e" width="1.0" />
    <style-area fade="11" fill="#9ac56e" id="park" />
    <style-area fade="12" fill="#c9dc91" id="garden" />
    <style-area fade="6" fill="#e8e7e3" id="residential" />
    <style-area fade="10" fill="#e7e2e6" id="industrial" />
    <style-area fade="12" fill="#e1dce0" id="construction" />
    <style-area fade="12" fill="#ddddcc" id="quarry" />
    <style-area fade="12" fill="#efeae0" id="allotments" />

    <style-text caption="true" fill="#368167" id="sports_centre" priority="8" size="16"
        stroke="#cdeae0" stroke-width="2.0" />

    <!-- Place styles -->
    <style-text caption="true" fill="#893889" id="place_country" size="16" stroke="#ffffff"
        stroke-width="2.5" />
    <style-text caption="true" fill="#000000" id="place" size="16" stroke="#ffffff"
        stroke-width="2.0" />
    <style-text caption="true" fill="#444411" id="place_village" use="place" />
    <style-text style="italic" caption="true" fill="#606060" id="place_suburb" use="place" />
    <style-text id="place_town" symbol="assets:symbols/dot_black.svg" use="place" />
    <style-text id="place_city" symbol="assets:symbols/dot_white.svg" use="place" />
    <style-text id="place_capital" symbol="assets:symbols/star.svg" use="place" />

    <!-- Road styles -->
    <style-line id="oneway" src="assets:symbols/oneway.svg" />
    <style-line id="oneway-reverse" src="assets:symbols/oneway_reverse.svg" />
    <xi:include href="inc_highway_styles.xml" />

    <!-- Protected areas -->
    <style-area fade="6" fill="#2000a000" id="nature_reserve" />
    <style-area fill="#1000a000" id="nature_reserve_light" />
    <style-line cap="butt" fix="true" id="nature_reserve" stroke="#4000a000" width="2.5" />
    <style-area fill="#20d40000" id="military" />
    <style-line cap="butt" fix="true" id="military" stroke="#40d40000" width="2.5" />

    <!-- Barriers -->
    <style-line cap="butt" fix="true" id="fence" stroke="#888888" width="1.1" />
    <style-line cap="butt" fix="true" id="hedge" stroke="#90b36c" width="2.0" />

    <!-- Buildings -->
    <style-line id="building" stroke="#eeb7b6b3" use="fix" />
    <style-area fill="#f2f0eb" id="building" stroke="#b7b6b3" stroke-width="1.0" />
    <style-text caption="true" fill="#606060" id="house-number" k="addr:housenumber" priority="9"
        size="12" stroke="#ffffff" stroke-width="2.0" />
    <style-text style="bold" fill="#202080" id="house-name" k="name" size="10" use="house-number" />

    <!-- Aeroways -->
    <style-line cap="butt" id="aeroway:runway" stroke="#c8ccbe" width="1.8" />
    <style-area fill="#c8ccbe" id="aeroway:runway" mesh="true" />

    <!--
    ==== RULES ====
    -->

    <m cat="water" e="way" k="natural" v="sea">
        <area use="water" />
    </m>
    <m cat="land" closed="yes" e="way" k="natural" v="land">
        <area use="land" />
    </m>

    <!-- Land usages -->
    <m closed="yes" e="way" k="landuse|leisure|amenity|tourism">
        <m cat="landclasses" v="residential|commercial|retail">
            <area use="residential" />
        </m>
        <m cat="landclasses" v="industrial">
            <area use="industrial" />
        </m>
        <m cat="urban" v="construction|brownfield|landfill">
            <area use="construction" />
        </m>
        <m cat="urban" v="quarry">
            <area use="quarry" />
        </m>
        <m cat="landclasses" v="allotments">
            <area use="allotments" />
        </m>
        <m cat="agriculture" v="farmland|vineyard|greenhouse_horticulture|plant_nursery|orchard">
            <area use="farmland" />
        </m>
        <m cat="agriculture" v="farmyard">
            <area use="farmyard" />
        </m>
        <m cat="urban" k="tourism" v="zoo">
            <area fill="#c0d69a" />
        </m>
        <m v="parking" zoom-min="16">
            <m select="first">
                <m cat="roads-surface" k="surface" v="dirt">
                    <area fill="#b28f67" />
                </m>
                <m cat="roads-surface" k="surface" v="unpaved">
                    <area fill="#d4c1aa" />
                </m>
                <m>
                    <area fill="#f0f0f0" />
                </m>
            </m>
        </m>
        <m cat="urban" k="amenity" v="kindergarten|school|college|university">
            <area fill="#e6e4c5" />
        </m>
        <m cat="urban" k="amenity" v="hospital">
            <area fill="#f2d9b1" />
        </m>
        <m cat="urban" v="village_green|recreation_ground|park|golf_course|common">
            <area use="park" />
            <m zoom-min="14">
                <line use="park" />
                <text style="bold_italic" area-size="0.1" caption="true" fill="#5d8236" k="name"
                    priority="4" size="16" stroke="#dceacd" stroke-width="2.0" />
            </m>
        </m>
        <m cat="urban" v="garden">
            <area use="garden" />
        </m>
        <m cat="urban" v="sports_centre|water_park">
            <m k="building" v="~">
                <area fill="#daefdb" />
                <m zoom-min="14">
                    <text use="sports_centre" />
                </m>
            </m>
        </m>
        <m cat="urban" v="stadium">
            <area fill="#e9e6e3" />
        </m>
        <m cat="urban" v="camp_site">
            <area use="greens" />
        </m>
        <m cat="urban" v="playground">
            <area fill="#f4f4de" />
            <line use="park" />
        </m>
        <m cat="urban" v="pitch">
            <area fill="#f4f4de" />
            <line cap="butt" fix="true" stroke="#d9d9a3" width="1.0" />
        </m>
        <m cat="nature" v="meadow">
            <area use="greens" />
        </m>
        <m cat="grass" v="grass">
            <area use="grass" />
        </m>
        <m cat="urban" v="dog_park">
            <area src="assets:patterns/dog_park.svg" />
            <line use="park" />
        </m>
        <m cat="urban" v="fountain">
            <area fill="#b4cbdc" stroke="#000080" stroke-width="0.15" />
        </m>
    </m>

    <!-- Base landuse areas -->
    <m cat="landclasses" k="aeroway">
        <m closed="yes" v="aerodrome">
            <area fill="#e8ecde" />
        </m>
    </m>

    <!-- Natural -->
    <!-- TODO https://github.com/gravitystorm/openstreetmap-carto/tree/master/symbols/generating_patterns -->
    <m closed="yes" e="way" k="natural">
        <m cat="nature" v="glacier">
            <area fill="#ddecec" />
        </m>
        <m cat="urban" v="beach">
            <area fill="#f7f5c8" />
        </m>
        <m cat="nature" v="mud">
            <area fill="#ab9d6f" />
        </m>
        <m cat="nature" v="sand" zoom-min="10">
            <area fill="#fffad1" />
        </m>
        <m cat="nature" v="scrub">
            <area use="scrub" />
            <area src="assets:patterns/scrub.svg" />
        </m>
        <m cat="nature" v="heath">
            <area fade="12" use="heath" />
        </m>
        <m cat="nature" v="grassland">
            <area fade="12" use="grass" />
        </m>
        <m cat="nature" v="scree">
            <area fade="10" use="scree" />
        </m>
        <m cat="nature" v="shingle">
            <area use="scree" />
        </m>
        <m cat="nature" v="bare_rock">
            <area use="scree" />
            <area src="assets:patterns/rock_overlay.png" />
        </m>
        <m cat="forest" v="forest|wood">
            <area use="wood" />
        </m>
        <m cat="nature" v="marsh">
            <area src="assets:patterns/wetland.svg" />
            <area src="assets:patterns/marsh.svg" /> <!-- zoomed 500% + 300% -->
            <text area-size="0.05" caption="true" use="water" />
        </m>
        <m cat="nature" v="wetland">
            <area src="assets:patterns/wetland.svg" />
            <text area-size="0.05" caption="true" use="water" />
        </m>
    </m>
    <m cat="nature" k="man_made" v="cutline">
        <line cap="butt" fade="14" stroke="#d3dcb9" width="2.0" />
    </m>

    <!-- Landuse -->
    <m closed="yes" e="way" k="landuse">
        <m cat="urban" v="cemetery" zoom-min="11">
            <area src="assets:patterns/cemetery.svg" />
            <m zoom-min="14">
                <line use="park" />
                <text style="bold_italic" area-size="0.1" caption="true" fill="#777777" k="name"
                    priority="4" size="16" stroke="#f6f6f6" stroke-width="2.0" />
            </m>
        </m>
    </m>
    <m k="aeroway">
        <m cat="aeroways" closed="yes" v="apron">
            <area fill="#f0f0f0" />
        </m>
        <m cat="aeroways" closed="yes" v="terminal|hangar">
            <area use="building" />
            <text use="house-name" />
        </m>
        <m cat="aeroways" closed="no" v="runway">
            <line use="aeroway:runway" />
            <m zoom-min="13">
                <text fill="#444444" k="ref" size="14" stroke="#eeeeee" stroke-width="2.0" />
            </m>
        </m>
        <m cat="aeroways" closed="no" v="taxiway">
            <line use="aeroway:runway" width="-1.0" />
            <m zoom-min="15">
                <text fill="#444444" k="ref" size="10" stroke="#eeeeee" stroke-width="2.0" />
            </m>
        </m>
        <m cat="aeroways" closed="yes" v="runway|taxiway">
            <area use="aeroway:runway" />
            <text caption="true" fill="#444444" k="ref" size="14" stroke="#eeeeee"
                stroke-width="2.0" />
        </m>
    </m>

    <!-- THIS IS A DANGEROUS HACK as Android does not support xi:include! It assumes a lot of
    prerequisites how includes are formatted, see Themes class for details -->
    <xi:include href="inc_water.xml" />

    <xi:include href="inc_ground_objects.xml" />

    <xi:include href="inc_buildings.xml" />

    <xi:include href="inc_hiking_routes.xml" />

    <xi:include href="inc_highways.xml" />

    <xi:include href="inc_railways.xml" />

    <xi:include href="inc_highway_bridges.xml" />

    <xi:include href="inc_railway_bridges.xml" />

    <xi:include href="inc_barrier_lines.xml" />

    <m cat="forest" k="natural" v="tree" zoom-min="15">
        <area fade="15" fill="#90b36c" mesh="true" />
    </m>

    <xi:include href="inc_boundaries.xml" />

    <xi:include href="inc_contours.xml" />

    <!-- Man made objects above ground -->
    <xi:include href="inc_aerialways.xml" />

    <!-- Topological (orientational) objects above ground -->
    <m k="power">
        <m cat="topo" e="way" v="line" zoom-min="14">
            <line cap="butt" fix="true" stroke="#6e6e6e" width="1.5" />
        </m>
        <m cat="topo" v="tower" zoom-min="16">
            <symbol src="assets:symbols/power/tower.svg" />
        </m>
        <m cat="urban" v="generator" zoom-min="14">
            <m k="generator:source" select="first">
                <m v="wind">
                    <symbol merge-gap="0" src="assets:symbols/power/wind.svg" />
                </m>
            </m>
        </m>
    </m>
    <m cat="topo" k="man_made">
        <m v="tower" zoom-min="16">
            <!-- building tag should not be present -->
            <m k="building" v="~">
                <symbol src="assets:symbols/tower.svg" />
            </m>
        </m>
    </m>

    <xi:include href="inc_natural_points.xml" />

    <xi:include href="inc_mountain_points.xml" />

    <xi:include href="inc_protected_areas.xml" />

    <!-- POI symbols, names and house numbers -->

    <xi:include href="inc_places.xml" />

    <xi:include href="inc_symbols.xml" />

    <xi:include href="inc_poi.xml" />

</rendertheme>